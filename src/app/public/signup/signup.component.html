<div class="auth-page">
	<button class="back-button has-icon" (click)="activeStep = 'basic'" *ngIf="activeStep === 'otp'">
		<img src="assets/img/arrow-left-icon-primary.svg" alt="arrow back icon" />
	</button>

	<section class="auth-page--container">
		<img src="/assets/img/logo.svg" alt="convoy logo" class="logo" />

		<ng-container *ngIf="activeStep === 'basic'">
			<h3>Create your workspace, ðŸ’»</h3>
			<p>A workspace is your virtual office where you manage everything webhooks happening in your business. Tell us about your business.</p>

			<form [formGroup]="signupForm" class="card card__shadow" (ngSubmit)="signup()">
				<div class="input">
					<div class="input--error-message" *ngIf="signupForm.controls.org_name.touched && signupForm.controls.org_name.invalid">
						<img src="assets/img/input-error-icon.svg" alt="input error icon" />
						<span>Business name is required</span>
					</div>
					<input
						type="text"
						aria-label="Business name"
						autocomplete="org_name"
						formControlName="org_name"
						[ngClass]="{ invalid: signupForm.controls.org_name.touched && signupForm.controls.org_name.invalid }"
					/>
					<label for="">Business name</label>
				</div>

				<div class="input">
					<div class="input--error-message" *ngIf="signupForm.controls.email.touched && signupForm.controls.email.invalid">
						<img src="assets/img/input-error-icon.svg" alt="input error icon" />
						<span>Email is required</span>
					</div>
					<input type="email" aria-label="Email address" autocomplete="email" formControlName="email" [ngClass]="{ invalid: signupForm.controls.email.touched && signupForm.controls.email.invalid }" />
					<label for="email">Email address</label>
				</div>
				<div class="input smaller">
					<div class="input--error-message" *ngIf="signupForm.controls.firstname.touched && signupForm.controls.firstname.invalid">
						<img src="assets/img/input-error-icon.svg" alt="input error icon" />
						<span>Firstname is required</span>
					</div>
					<input
						type="text"
						aria-label="Firstname"
						autocomplete="firstname"
						id="first-name"
						formControlName="firstname"
						[ngClass]="{ invalid: signupForm.controls.firstname.touched && signupForm.controls.firstname.invalid }"
					/>
					<label for="email">Firstname</label>
				</div>

				<div class="input smaller">
					<div class="input--error-message" *ngIf="signupForm.controls.lastname.touched && signupForm.controls.lastname.invalid">
						<img src="assets/img/input-error-icon.svg" alt="input error icon" />
						<span>Lastname is required</span>
					</div>
					<input
						type="text"
						aria-label="Lastname"
						autocomplete="lastname"
						id="last-name"
						formControlName="lastname"
						[ngClass]="{ invalid: signupForm.controls.lastname.touched && signupForm.controls.lastname.invalid }"
					/>
					<label for="lastname">Lastname</label>
				</div>
				<div class="input">
					<div class="input--error-message" *ngIf="signupForm.controls.password.touched && signupForm.controls.password.invalid && signupForm.controls.password.errors?.['minlength']">
						<img src="assets/img/input-error-icon.svg" alt="input error icon" />
						<span>Password should be at least 8 characters</span>
					</div>
					<div class="input--error-message" *ngIf="signupForm.controls.password.touched && signupForm.controls.password.invalid && signupForm.controls.password.errors?.['pattern']">
						<img src="assets/img/input-error-icon.svg" alt="input error icon" />
						<span>Password should have at least one number and one alphabet</span>
					</div>
					<div class="input--error-message" *ngIf="signupForm.controls.password.touched && signupForm.controls.password.invalid && signupForm.controls.password.errors?.['required']">
						<img src="assets/img/input-error-icon.svg" alt="input error icon" />
						<span>Password is required</span>
					</div>
					<div class="input--password">
						<input
							[type]="showLoginPassword ? 'text' : 'password'"
							aria-label="password"
							autocomplete="new-password"
							formControlName="password"
							[ngClass]="{ invalid: signupForm.controls.password.touched && signupForm.controls.password.invalid }"
						/>
						<label for="password">Password</label>
						<button class="input--password__view-toggle" type="button" (click)="showLoginPassword = !showLoginPassword">
							<img
								[src]="!showLoginPassword ? '/assets/img/password-invisible-icon.svg' : '/assets/img/password-visible-icon.svg'"
								alt="showLoginPassword ? 'hide password icon' : 'view password icon'"
							/>
						</button>
					</div>
				</div>

				<div class="checkbox" (click)="acceptTerms = !acceptTerms">
					<img [src]="acceptTerms ? '/assets/img/Checkbox.svg' : '/assets/img/square-check.svg'" [alt]="acceptTerms ? 'accept icon' : 'accept icon'" />
					<label for="termsCondition">
						<div>I have read, understood and I agree to Convoyâ€™s Privacy Policy, and Terms & Conditions.</div>
					</label>
				</div>

				<button [disabled]="loading" class="primary full-100">
					{{ disableLoginBtn ? 'loading....' : 'Create Account' }}
				</button>
			</form>

			<button class="white full-100" [routerLink]="['/login']">Login if you already have an account</button>
		</ng-container>

		<ng-container *ngIf="activeStep === 'otp'">
			<h3>We sent you an OTP to jaykay@zoho.com, ðŸ“¬</h3>
			<p>A password reset link has been sent to your email, fellow the link or enter the 6 digits code in it below to continue.</p>

			<div class="card otp">
				<div class="otp--codes">
					<div class="input">
						<input type="text" aria-label="otp code 1" />
					</div>
					<div class="input">
						<input type="text" aria-label="otp code 2" />
					</div>
					<div class="input">
						<input type="text" aria-label="otp code 3" />
					</div>
					<div class="input">
						<input type="text" aria-label="otp code 4" />
					</div>
					<div class="input">
						<input type="text" aria-label="otp code 5" />
					</div>
					<div class="input">
						<input type="text" aria-label="otp code 6" />
					</div>
				</div>
				<button class="primary full-100">Continue</button>
			</div>

			<button class="white full-100" (click)="signup()">Resend reset link in 0:59</button>
		</ng-container>
	</section>
</div>
