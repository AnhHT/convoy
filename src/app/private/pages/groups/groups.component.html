<div class="groups-page page">
	<div class="page--head">
		<div>
			<h1>Groups</h1>
			<p>A definition of what a group is goes here</p>
		</div>

		<button class="primary" (click)="showCreateGroupModal = true">Create Group</button>
	</div>

	<ul class="groups" *ngIf="!noData">
		<li class="group" *ngFor="let group of groups">
			<div class="group--head">
				<h4>{{group.name}}</h4>
			</div>
			<div class="group--metric">
				<div>
					<span>234</span>
					Message Sent
				</div>
				<div>
					<span>24</span>
					Apps
				</div>
			</div>
			<div class="group--body">
				<img src="/assets/img/chart-icon.svg" alt="graph icon" />
			</div>
		</li>

	</ul>
</div>

<div class="page" *ngIf="noData">
	<div class="page--empty-state">
		<div class="page--empty-state--img">
			<img src="/assets/img/group-empty-img.svg" alt="add group empty" />
		</div>
		<h4>You have no group yet</h4>
		<p>A definition of what a group is goes here</p>
		<button class="primary" (click)="showCreateGroupModal = true">Create Group</button>
	</div>
</div>

<div class="overlay" *ngIf="showCreateGroupModal === true"></div>
<div class="modal modal__right" *ngIf="showCreateGroupModal === true">
	<div class="modal--head">
		<h1>Create Group</h1>
		<button class="modal--close clear" (click)="showCreateGroupModal = false">
			<img src="/assets/img/modal-close-icon.svg" alt="close icon" />
		</button>
	</div>

	<div class="modal--body">
		<form [formGroup]="createGroupForm" (ngSubmit)="createGroup()">
			<div class="input">
				<label for="group-name">Group Name</label>
				<input type="text" id="group-name" formControlName="name" />
				<div class="input--error-message" *ngIf="createGroupForm.controls.name.touched && createGroupForm.controls.name.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>Name is required</span>
				</div>
			</div>

			<h3>Retry Strategy</h3>
			<div formGroupName="retry">
				<div class="input">
					<label for="interval">Interval seconds</label>
					<input type="number" id="interval" formControlName="interval_seconds" />
				</div>

				<div class="input">
					<label for="retry-limit">Retry Limit</label>
					<input type="number" id="retry-limit" formControlName="limit" />
				</div>
			</div>

			<h3>Signature</h3>
			<div formGroupName="signature">
				<div class="input">
					<label for="signatur-header">Header</label>
					<input type="text" id="signatur-header" formControlName="header" />
				</div>

				<div class="input">
					<label for="hash">Hash</label>
					<input type="text" id="hash" formControlName="hash" />
				</div>
			</div>
			<div class="input">
				<div class="input--password">
					<input [type]="showLoginPassword ? 'text' : 'password'" id="password" name="password" autocomplete="current-password" placeholder="Enter your password" formControlName="password" />
					<button class="input--password__view-toggle" (click)="showLoginPassword = !showLoginPassword" type="button">
						<img
							[src]="!showLoginPassword ? '/assets/img/password-invisible-icon.svg' : '/assets/img/password-visible-icon.svg'"
							[alt]="showLoginPassword ? 'hide password icon' : 'view password icon'"
						/>
					</button>
				</div>
				<div class="input--error-message" *ngIf="createGroupForm.controls.password.touched && createGroupForm.controls.password.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>Password is required</span>
				</div>
			</div>
		</form>
	</div>

	<div class="modal--footer">
		<div class="button-container">
			<button class="white" (click)="showCreateGroupModal = false">Discard</button>
			<button class="primary" (click)="createGroup()">{{ loading ? 'Creating Group...' : 'Create Group' }}</button>
		</div>
	</div>
</div>
